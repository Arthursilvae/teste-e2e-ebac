pipeline {
   
    agent any //difine que a pipeline pode rodar em qualquer agente disponivel 
   
    stages {  //etapas da pipeline
       stage('Clonar o repositorio') {
        steps{
            git branch: 'main', url: 'https://github.com/Arthursilvae/teste-api-cypress' // etapa 1 "clonar o repositorio"
        }
       stage('Instalar depedencias'){
        steps{
            sh 'npm install' // etapa 2 "instalar as depedencias"
        }
        stage('Executar testes')
        steps{
            sh 'NO_COLOR=1 npm run cy:run'
        }  
      }
    }
 }
}